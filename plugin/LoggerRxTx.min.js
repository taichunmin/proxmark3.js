!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Pm3LoggerRxTx=t(e._)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);return class{constructor(){this.name="loggerRxTx"}install(e,t){const{pm3:i,utils:a}=e,{short:o=!0}=t,s=e=>o?1630752080===e.getUint32(0)||1647529296===e.getUint32(0)?e.subarray(6,-2).inspect:e.subarray(0,n.default.findLastIndex(e,(e=>e))+1).inspect:e.inspect;i.addMiddleware("writePacket",(async(e,t)=>(a.logTime(`tx = ${s(e.pack)}`),await t()))),i.addMiddleware("readRespTimeout",(async(e,t)=>{const n=await t();return a.logTime(`rx = ${s(n.pack)}`),n}))}}}));
